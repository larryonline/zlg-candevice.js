/**
 * ZLG CAN 驱动常量定义
 * 根据 zlgcan.h 头文件定义
 */

// 设备类型
export const ZCAN_DEVICE_TYPE = {
  ZCAN_PCI5121: 1,
  ZCAN_PCI9810: 2,
  ZCAN_USBCAN1: 3,
  ZCAN_USBCAN2: 4,
  ZCAN_PCI9820: 5,
  ZCAN_CAN232: 6,
  ZCAN_PCI5110: 7,
  ZCAN_CANLITE: 8,
  ZCAN_ISA9620: 9,
  ZCAN_ISA5420: 10,
  ZCAN_PC104CAN: 11,
  ZCAN_CANETUDP: 12,
  ZCAN_CANETE: 12,
  ZCAN_DNP9810: 13,
  ZCAN_PCI9840: 14,
  ZCAN_PC104CAN2: 15,
  ZCAN_PCI9820I: 16,
  ZCAN_CANETTCP: 17,
  ZCAN_PCIE_9220: 18,
  ZCAN_PCI5010U: 19,
  ZCAN_USBCAN_E_U: 20,
  ZCAN_USBCAN_2E_U: 21,
  ZCAN_PCI5020U: 22,
  ZCAN_EG20T_CAN: 23,
  ZCAN_PCIE9221: 24,
  ZCAN_WIFICAN_TCP: 25,
  ZCAN_WIFICAN_UDP: 26,
  ZCAN_PCIe9120: 27,
  ZCAN_PCIe9110: 28,
  ZCAN_PCIe9140: 29,
  ZCAN_USBCAN_4E_U: 31,
  ZCAN_CANDTU_200UR: 32,
  ZCAN_CANDTU_MINI: 33,
  ZCAN_USBCAN_8E_U: 34,
  ZCAN_CANREPLAY: 35,
  ZCAN_CANDTU_NET: 36,
  ZCAN_CANDTU_100UR: 37,
  ZCAN_PCIE_CANFD_100U: 38,
  ZCAN_PCIE_CANFD_200U: 39,
  ZCAN_PCIE_CANFD_400U: 40,
  ZCAN_USBCANFD_200U: 41,
  ZCAN_USBCANFD_100U: 42,
  ZCAN_USBCANFD_MINI: 43,
  ZCAN_CANFDCOM_100IE: 44,
  ZCAN_CANSCOPE: 45,
  ZCAN_CLOUD: 46,
  ZCAN_CANDTU_NET_400: 47,
  ZCAN_CANFDNET_TCP: 48,
  ZCAN_CANFDNET_200U_TCP: 48,
  ZCAN_CANFDNET_UDP: 49,
  ZCAN_CANFDNET_200U_UDP: 49,
  ZCAN_CANFDWIFI_TCP: 50,
  ZCAN_CANFDWIFI_100U_TCP: 50,
  ZCAN_CANFDWIFI_UDP: 51,
  ZCAN_CANFDWIFI_100U_UDP: 51,
  ZCAN_CANFDNET_400U_TCP: 52,
  ZCAN_CANFDNET_400U_UDP: 53,
  ZCAN_CANFDBLUE_200U: 54,
  ZCAN_CANFDNET_100U_TCP: 55,
  ZCAN_CANFDNET_100U_UDP: 56,
  ZCAN_CANFDNET_800U_TCP: 57,
  ZCAN_CANFDNET_800U_UDP: 58,
  ZCAN_USBCANFD_800U: 59,
  ZCAN_PCIE_CANFD_100U_EX: 60,
  ZCAN_PCIE_CANFD_400U_EX: 61,
  ZCAN_PCIE_CANFD_200U_MINI: 62,
  ZCAN_PCIE_CANFD_200U_EX: 63,
  ZCAN_PCIE_CANFD_200U_M2: 63,
  ZCAN_CANFDDTU_400_TCP: 64,
  ZCAN_CANFDDTU_400_UDP: 65,
  ZCAN_CANFDWIFI_200U_TCP: 66,
  ZCAN_CANFDWIFI_200U_UDP: 67,
  ZCAN_CANFDDTU_800ER_TCP: 68,
  ZCAN_CANFDDTU_800ER_UDP: 69,
  ZCAN_CANFDDTU_800EWGR_TCP: 70,
  ZCAN_CANFDDTU_800EWGR_UDP: 71,
  ZCAN_CANFDDTU_600EWGR_TCP: 72,
  ZCAN_CANFDDTU_600EWGR_UDP: 73,
  ZCAN_CANFDDTU_CASCADE_TCP: 74,
  ZCAN_CANFDDTU_CASCADE_UDP: 75,
  ZCAN_USBCANFD_400U: 76,
  ZCAN_CANFDDTU_200U: 77,
  ZCAN_ZPSCANFD_TCP: 78,
  ZCAN_ZPSCANFD_USB: 79,
  ZCAN_CANFDBRIDGE_PLUS: 80,
  ZCAN_CANFDDTU_300U: 81,
  ZCAN_PCIE_CANFD_800U: 82,
  ZCAN_PCIE_CANFD_1200U: 83,
  ZCAN_MINI_PCIE_CANFD: 84,
  ZCAN_USBCANFD_800H: 85,
  ZCAN_BG002: 86,
  ZCAN_BG004: 87,
  ZCAN_OFFLINE_DEVICE: 98,
  ZCAN_VIRTUAL_DEVICE: 99,
} as const;

export type ZcanDeviceType = typeof ZCAN_DEVICE_TYPE[keyof typeof ZCAN_DEVICE_TYPE];

// 错误码
export const ZCAN_ERROR = {
  CAN_OVERFLOW: 0x0001,
  CAN_ERRALARM: 0x0002,
  CAN_PASSIVE: 0x0004,
  CAN_LOSE: 0x0008,
  CAN_BUSERR: 0x0010,
  CAN_BUSOFF: 0x0020,
  CAN_BUFFER_OVERFLOW: 0x0040,
  DEVICEOPENED: 0x0100,
  DEVICEOPEN: 0x0200,
  DEVICENOTOPEN: 0x0400,
  BUFFEROVERFLOW: 0x0800,
  DEVICENOTEXIST: 0x1000,
  LOADKERNELDLL: 0x2000,
  CMDFAILED: 0x4000,
  BUFFERCREATE: 0x8000,
  CANETE_PORTOPENED: 0x00010000,
  CANETE_INDEXUSED: 0x00020000,
  REF_TYPE_ID: 0x00030001,
  CREATE_SOCKET: 0x00030002,
  OPEN_CONNECT: 0x00030003,
  NO_STARTUP: 0x00030004,
  NO_CONNECTED: 0x00030005,
  SEND_PARTIAL: 0x00030006,
  SEND_TOO_FAST: 0x00030007,
} as const;

// 返回状态
export const ZCAN_STATUS = {
  ERR: 0,
  OK: 1,
  ONLINE: 2,
  OFFLINE: 3,
  UNSUPPORTED: 4,
  BUFFER_TOO_SMALL: 5,
} as const;

export type ZcanStatus = typeof ZCAN_STATUS[keyof typeof ZCAN_STATUS];

// CAN 帧标志
export const CAN_FLAG = {
  EFF_FLAG: 0x80000000,  // 扩展帧标志
  RTR_FLAG: 0x40000000,  // 远程帧标志
  ERR_FLAG: 0x20000000,  // 错误帧标志
  ID_FLAG: 0x1FFFFFFF,   // ID 掩码
  SFF_MASK: 0x000007FF,  // 标准帧 ID 掩码 (11 bit)
  EFF_MASK: 0x1FFFFFFF,  // 扩展帧 ID 掩码 (29 bit)
  ERR_MASK: 0x1FFFFFFF,  // 错误帧 ID 掩码 (omit EFF, RTR, ERR flags)
} as const;

// CAN 帧发送标志
export const TX_FLAG = {
  DELAY_SEND_FLAG: 0x80,           // 延时发送标志
  DELAY_SEND_TIME_UNIT_FLAG: 0x40, // 延时发送时间单位标志 (1: 100us, 0: 1ms)
  ECHO_FLAG: 0x20,                 // 发送回显标志
} as const;

// CANFD 帧标志
export const CANFD_FLAG = {
  BRS: 0x01,  // 比特率切换
  ESI: 0x02,  // 错误状态指示
} as const;

// 数据类型
export const ZCAN_DATA_TYPE = {
  CAN: 0,
  CANFD: 1,
  ALL_DATA: 2,
} as const;

// 发送类型
export const ZCAN_TRANSMIT_TYPE = {
  NORMAL: 0,      // 正常发送
  SINGLE: 1,      // 单次发送
  SELF_SR: 2,     // 自发自收
  SINGLE_SR: 3,   // 单次自发自收
} as const;

// 无效句柄
export const INVALID_DEVICE_HANDLE = 0;
export const INVALID_CHANNEL_HANDLE = 0;

// CAN 帧最大数据长度
export const CAN_MAX_DLEN = 8;
export const CANFD_MAX_DLEN = 64;

// CAN 帧最大 DLC 值
export const CAN_MAX_DLC = 8;
export const CANFD_MAX_DLC = 15;
